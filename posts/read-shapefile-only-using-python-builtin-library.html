<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/276042aec90b4f95.css" data-precedence="next"/><title>Read shapefile only using python&#x27;s built in libraray -- part 1</title><meta name="description" content="Read shapefile only using python&#x27;s built in libraray"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" noModule=""></script></head><body class="antialiased min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-50 __className_cc7fef"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="max-w-2xl mx-auto py-10 px-4"><header><div class="flex items-center justify-between"><button class="border rounded-md w-6 h-6 flex items-center justify-center"><span class="sr-only">Toggle mode</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"></path></svg></button><nav class="ml-auto text-sm font-medium space-x-6"><a href="/">Home</a><a href="/about">About</a></nav></div></header><main><article class="py-6 prose dark:prose-invert"><h1 class="mb-2">Read shapefile only using python&#x27;s built in libraray -- part 1</h1><p class="text-xl mt-0 text-slate-700 dark:text-slate-200">Read shapefile only using python&#x27;s built in libraray</p><hr class="my-4"/><p>Shapefile is open source, well, sort of. ESRI did not provide any tool to read it easily,
but at least it provided the technical
<a href="https://www.esri.com/content/dam/esrisites/sitecore-archive/Files/Pdfs/library/whitepapers/pdfs/shapefile.pdf">specification</a>.
So it won&#x27;t be so hard to write our own library that reads binary from it and convert it to some format
that is more friendly.<br/>
<!-- -->In the blog, I will try to use python&#x27;s built in library to read shapefile, and convert it to Geojson.
So we can use it in our web application.
A Shapefile usually contains three files, .shp, .shx, .dbf. The .shp file contains the geometry information,
the .shx file contains the index information, and the .dbf file contains the attribute information.
There maybe be other files,like proj file about map project that is not compulsory and usually exclusively used by ESRI, so we will not try to Read and Convert it.</p>
<p>Reading through the specification, we can find the shp file is quite intuitive, it only contains one geometry type,
if the geometry type is point, then the record is about a point, if the geometry type is polyline,
then the record is multiple points that form a the geometry.</p>
<img alt="Image" loading="lazy" width="718" height="404" decoding="async" data-nimg="1" style="color:transparent" src="/shapefile1.png"/>
<p>The File Header takes up 100 bytes(50 words)
A lot of bytes is reserved and what we need is the file length and the geometry type which
set at byte 24-27 and byte 32-35 respectively.
one thing we need to notice is that the byte order of file length is big endian, while the byte order of geometry type is little endian.
after it there are four double precision numbers that represent the bounding box of the shapefile</p>
<img alt="Image" loading="lazy" width="718" height="404" decoding="async" data-nimg="1" style="color:transparent" src="/shapeMain.png"/>
<p>after we know the these two crucial information, we can start to read the records.<br/>
<!-- -->Each record Header takes up 8 bytes(4 words), I keep stress <strong>word</strong> cause it&#x27;s used in the whitepaper extensively, and the Record Content length is variable and specified in the Record Header.</p>
<img alt="Image" loading="lazy" width="718" height="404" decoding="async" data-nimg="1" style="color:transparent" src="/recordHeader.png"/>
<p>Every record Header contains the record number(integer) and the record length(integer), both are big endian that set at byte 0-3 and byte 4-7 respectively.
The record number begins with <strong>1</strong> and increments sequentially. The record length is the length of the record content in 16-bit words.
So each record takes up (2 byte * record length + 8) bytes</p>
<p>shapefile have a lot of types of geometry, but we will only focus on the three most common types, point, polyline and polygon.
A point consists of a pair of double-precision coordinates in the order X,Y.
The record content of point is quite simple, it only contains the x and y coordinate of the point,
both are double precision floating point number, and both are little endian,</p>
<img alt="Image" loading="lazy" width="718" height="404" decoding="async" data-nimg="1" style="color:transparent" src="/pointStructure.png"/>
<hr/>
<img alt="Image" loading="lazy" width="718" height="404" decoding="async" data-nimg="1" style="color:transparent" src="/pointStructure2.png"/>
<p>while polyline and polygon contains a list of points;</p>
<img alt="Image" loading="lazy" width="718" height="404" decoding="async" data-nimg="1" style="color:transparent" src="/polyline.png"/>
<p>It also have a bounding box that is used to speed up the rendering process.
A polyline can be divide into multiple parts, each part is a list of points,
We can find the parts info at byte 44~(x-1), x = 44 + 4 * num_parts, the parts section stores the index of the first point of each part respect to
the following points section which is a array of points.<br/>
<!-- -->For example, if the parts section is [0, 3, 5], then the first part is the first three points in the points section.</p>
<p>And what about polygon?
Actually, we can think of polygon as a special case of polyline,
the only difference is that the last point of the polygon is the same as the first point.<br/>
<!-- -->with thses information, we can start to write our own library to read shapefile&#x27;s geometry information</p>
<p>First thing first, We need a class to represent the shapefile.</p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="python" data-theme="default"><code data-language="python" data-theme="default" style="display:grid"><span data-line=""><span style="color:#C678DD">class</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Shp</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">object</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">__init__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">,*</span><span style="color:#D19A66;font-style:italic">agrs</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#set the path of the first parameter as the path of the shapefile when  Shp is initialized</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.path</span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF">agrs[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">] </span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shp</span><span style="color:#56B6C2">=</span><span style="color:#D19A66">None</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#a list to hold file opened, so we can close them later</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">_file_to_close</span><span style="color:#ABB2BF">()</span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF">[]</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shpLength</span><span style="color:#56B6C2">=</span><span style="color:#D19A66">None</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shapeType</span><span style="color:#56B6C2">=</span><span style="color:#D19A66">None</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.numShapes</span><span style="color:#56B6C2">=</span><span style="color:#D19A66">None</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shapeName</span><span style="color:#56B6C2">=</span><span style="color:#D19A66">None</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.encoding </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&#x27;utf-8&#x27;</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.encoding_errors </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&#x27;strict&#x27;</span></span></code></pre></div>
<p>The very first information we need in order to read .shp file is the shp file&#x27;s header,
So we load the shp file and read the header in the constructor.</p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="python" data-theme="default"><code data-language="python" data-theme="default" style="display:grid"><span data-line=""><span style="color:#C678DD">class</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Shp</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">object</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">__init__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">,*</span><span style="color:#D19A66;font-style:italic">args</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#D19A66">...</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">load</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">load</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66;font-style:italic">shapeName</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">        (shapeName, ext) </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> os.path.</span><span style="color:#61AFEF">splitext</span><span style="color:#ABB2BF">(shapefile)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shapeName </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> shapeName</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">load_shp</span><span style="color:#ABB2BF">(shapeName)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">load_shp</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66;font-style:italic">shapeName</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shp </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">open</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;</span><span style="color:#D19A66">%s</span><span style="color:#98C379">.</span><span style="color:#D19A66">%s</span><span style="color:#98C379">&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">%</span><span style="color:#ABB2BF"> (shapefile_name, </span><span style="color:#98C379">&quot;shp&quot;</span><span style="color:#ABB2BF">), </span><span style="color:#98C379">&quot;rb&quot;</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shx </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">open</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;</span><span style="color:#D19A66">%s</span><span style="color:#98C379">.</span><span style="color:#D19A66">%s</span><span style="color:#98C379">&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">%</span><span style="color:#ABB2BF"> (shapefile_name, </span><span style="color:#98C379">&quot;shx&quot;</span><span style="color:#ABB2BF">), </span><span style="color:#98C379">&quot;rb&quot;</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">._file_to_close.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shp)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">._file_to_close.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shx)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shp):</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">load_shp_header</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shx):</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">load_shx_header</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">load_shp_header</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">        shp </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shp</span></span>
<span data-line=""><span style="color:#ABB2BF">        shp.</span><span style="color:#61AFEF">seek</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">24</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># file length big endian</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shpLength </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&gt;i&quot;</span><span style="color:#ABB2BF">, shp.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">4</span><span style="color:#ABB2BF">))[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">2</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># from word(2 bytes) to byte</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># shape type :little endian</span></span>
<span data-line=""><span style="color:#ABB2BF">        shp.</span><span style="color:#61AFEF">seek</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">32</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#small endian, one integer, 4 bytes</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shapeType </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&lt;i&quot;</span><span style="color:#ABB2BF">, shp.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">4</span><span style="color:#ABB2BF">))[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">] </span><span style="color:#7F848E;font-style:italic">#unpack returns a tuple,</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#so we need to get the first element of the tuple</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#four double that represent the bounding box</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.bbox </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">_Array</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;d&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&lt;4d&quot;</span><span style="color:#ABB2BF">, shp.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">32</span><span style="color:#ABB2BF">)))</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#two double that represent the z box </span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.zbox </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">_Array</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;d&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&lt;2d&quot;</span><span style="color:#ABB2BF">, shp.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">16</span><span style="color:#ABB2BF">)))</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#two double that represent the m box</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.mbox </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> m </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">_Array</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;d&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&lt;2d&quot;</span><span style="color:#ABB2BF">, shp.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">16</span><span style="color:#ABB2BF">))):</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#D19A66">NODATA</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">-</span><span style="color:#D19A66">10e38</span><span style="color:#ABB2BF"> </span><span style="color:#7F848E;font-style:italic">#according to the whitepaper, number &lt; -10e38 is considered as nodata</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic">#we can also specify the nodata value at  the top of the file</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> m </span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NODATA</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.mbox.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(m)</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.mbox.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF"> </span></span>
<span data-line=""> </span></code></pre></div>
<p>So the shp&#x27;s header has been read to memory
We can start to read the content of each feature&#x27;s geometry
We can return a generator that yields the geometry of each feature,
the generator can be really helpful when we have a large shapefile</p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="python" data-theme="default"><code data-language="python" data-theme="default" style="display:grid"><span data-line=""><span style="color:#7F848E;font-style:italic"># we create a Shape class to represent the geometry and header of each feature</span></span>
<span data-line=""><span style="color:#C678DD">class</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Shape</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">object</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">__init__</span><span style="color:#ABB2BF">(</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">,   </span><span style="color:#D19A66;font-style:italic">oid</span><span style="color:#ABB2BF">=</span><span style="color:#D19A66">None</span></span>
<span data-line=""><span style="color:#ABB2BF">    ):</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#when we init a Shape, we give it oid</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shapeType </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">None</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.points </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.parts </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#we set these public fields so </span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#that we can set it outside the class </span></span>
<span data-line=""><span style="color:#ABB2BF">        </span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> partTypes:</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.partTypes </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> partTypes</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># and a dict to silently record any errors encountered</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">._errors </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> {}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># add oid which is the index of the feature in the shapefile</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> oid </span><span style="color:#C678DD">is</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">not</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.__oid </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> oid</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.__oid </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">-</span><span style="color:#D19A66">1</span></span></code></pre></div>
<p>we define a method that lazily read the geometry of each feature
by utilizing generator,
the geometry is only read when we need it</p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="python" data-theme="default"><code data-language="python" data-theme="default" style="display:grid"><span data-line=""><span style="color:#C678DD">class</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Shp</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">object</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#D19A66">...</span><span style="color:#ABB2BF"> </span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">iterShapes</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">bbox</span><span style="color:#ABB2BF">=</span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#98C379">&quot;&quot;&quot;Returns a generator of shapes in a shapefile. Useful</span></span>
<span data-line=""><span style="color:#98C379">        for handling large shapefiles.</span></span>
<span data-line=""><span style="color:#98C379">        To only read shapes within a given spatial region, specify the &#x27;bbox&#x27;</span></span>
<span data-line=""><span style="color:#98C379">        arg as a list or tuple of xmin,ymin,xmax,ymax.</span></span>
<span data-line=""><span style="color:#98C379">        &quot;&quot;&quot;</span></span>
<span data-line=""><span style="color:#ABB2BF">        shp </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">__getFileObj</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shp)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Found shapefiles which report incorrect</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># shp file length in the header. Can&#x27;t trust</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># that so we seek to the end of the file</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># and figure it out.</span></span>
<span data-line=""><span style="color:#ABB2BF">        shp.</span><span style="color:#61AFEF">seek</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">         </span></span>
<span data-line=""><span style="color:#ABB2BF">        shpLength </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> shp.</span><span style="color:#61AFEF">tell</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">        shp.</span><span style="color:#61AFEF">seek</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">100</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Instead iterate until reach end of file</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Collect the offset indices during iteration</span></span>
<span data-line=""><span style="color:#ABB2BF">        i </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span></span>
<span data-line=""><span style="color:#ABB2BF">        offsets </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">        pos </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> shp.</span><span style="color:#61AFEF">tell</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">while</span><span style="color:#ABB2BF"> pos </span><span style="color:#56B6C2">&lt;</span><span style="color:#ABB2BF"> shpLength:</span></span>
<span data-line=""><span style="color:#ABB2BF">            offsets.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(pos)</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic">#when we create a Shape, we give it oid</span></span>
<span data-line=""><span style="color:#ABB2BF">            shape </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">setShapeIndexAndRead</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">oid</span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF">i, )</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic">#because of the use of generator,</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic">#the shape is read when each __next__ is called</span></span>
<span data-line=""><span style="color:#ABB2BF">            pos </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> shp.</span><span style="color:#61AFEF">tell</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> shape:</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">yield</span><span style="color:#ABB2BF"> shape</span></span>
<span data-line=""><span style="color:#ABB2BF">            i </span><span style="color:#56B6C2">+=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Entire shp file consumed</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Update the number of shapes and list of offsets</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">assert</span><span style="color:#ABB2BF"> i </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(offsets)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.numShapes </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> i</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">._offsets </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> offsets</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">setShapeIndexAndRead</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">oid</span><span style="color:#ABB2BF">=</span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#98C379">&quot;&quot;&quot;Returns the header info and geometry for a single shape.&quot;&quot;&quot;</span></span>
<span data-line=""><span style="color:#ABB2BF">        f </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">__getFileObj</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shp)</span></span>
<span data-line=""><span style="color:#ABB2BF">        single_shape </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">Shape</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">oid</span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF">oid)</span></span>
<span data-line=""><span style="color:#ABB2BF">        nParts </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> nPoints </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> zmin </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> zmax </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> mmin </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> mmax </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">None</span></span>
<span data-line=""><span style="color:#ABB2BF">        (recIndex, recLength) </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&gt;2i&quot;</span><span style="color:#ABB2BF">, f.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">8</span><span style="color:#ABB2BF">))</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#print(recIndex,&quot;||&quot;,oid)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#the recIndex =oid+1 because the oid starts from 0</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic">#while recIndex starts from 1</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Determine the start of the next record</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#56B6C2">next</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> f.</span><span style="color:#61AFEF">tell</span><span style="color:#ABB2BF">() </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> recLength)</span></span>
<span data-line=""><span style="color:#ABB2BF">        shapeType </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&lt;i&quot;</span><span style="color:#ABB2BF">, f.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">4</span><span style="color:#ABB2BF">))[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">]</span></span>
<span data-line=""><span style="color:#ABB2BF">        single_shape.shapeType </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> shapeType</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># For Null shapes create an empty points list for consistency</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> shapeType </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">            single_shape.points </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># All shape types capable of having a bounding box</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">elif</span><span style="color:#ABB2BF"> shapeType </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">8</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">13</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">15</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">18</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">23</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">25</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">28</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">31</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">            single_shape.bbox </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">_Array</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;d&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&lt;4d&quot;</span><span style="color:#ABB2BF">, f.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">32</span><span style="color:#ABB2BF">)))</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic"># if bbox specified and no overlap, skip this shape</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Shape types with parts</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> shapeType </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">13</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">15</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">23</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">25</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">31</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">            nParts </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&lt;i&quot;</span><span style="color:#ABB2BF">, f.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">4</span><span style="color:#ABB2BF">))[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">]</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Shape types with points</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> shapeType </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">8</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">13</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">15</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">18</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">23</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">25</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">28</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">31</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">            nPoints </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&lt;i&quot;</span><span style="color:#ABB2BF">, f.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">4</span><span style="color:#ABB2BF">))[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">]</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Read parts</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> nParts:</span></span>
<span data-line=""><span style="color:#ABB2BF">            single_shape.parts </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">_Array</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;i&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&lt;</span><span style="color:#D19A66">%s</span><span style="color:#98C379">i&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">%</span><span style="color:#ABB2BF"> nParts, f.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(nParts </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">4</span><span style="color:#ABB2BF">)))</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Read points - produces a list of [x,y] values</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> nPoints:</span></span>
<span data-line=""><span style="color:#ABB2BF">            flat </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&lt;</span><span style="color:#D19A66">%s</span><span style="color:#98C379">d&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">%</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> nPoints), f.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">16</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> nPoints))</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic">#make the points into the form of [x,y] </span></span>
<span data-line=""><span style="color:#ABB2BF">            single_shape.points </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">list</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">zip</span><span style="color:#ABB2BF">(*(</span><span style="color:#56B6C2">iter</span><span style="color:#ABB2BF">(flat),) </span><span style="color:#56B6C2">*</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">))</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Read a single point</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> shapeType </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> (</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">11</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">21</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic">#only read two point, simply make it a array</span></span>
<span data-line=""><span style="color:#ABB2BF">            single_shape.points </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [</span><span style="color:#61AFEF">_Array</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;d&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#61AFEF">unpack</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&lt;2d&quot;</span><span style="color:#ABB2BF">, f.</span><span style="color:#61AFEF">read</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">16</span><span style="color:#ABB2BF">)))]</span></span>
<span data-line=""><span style="color:#ABB2BF">         </span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># Seek to the end of this record as defined by the record header because</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># the shapefile spec doesn&#x27;t require the actual content to meet the header</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># definition.  Probably allowed for lazy feature deletion.</span></span>
<span data-line=""><span style="color:#ABB2BF">        f.</span><span style="color:#61AFEF">seek</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">next</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> single_shape    </span></span>
<span data-line=""> </span></code></pre></div>
<p>Now we have every shape geometry
since we are dealing with the point,
polyline,ploygon,we only care about the points and parts of each shape</p>
<h2 id="the-gotcha-of-shapefile-about-multi"><a class="subheading-anchor" aria-label="Link to section" href="#the-gotcha-of-shapefile-about-multi"><span class="icon icon-link"></span></a>the gotcha of shapefile about <em>multi</em></h2>
<ul>
<li>GeoJson has a concept of <em>multi</em> geometry, like MultiPoint, MultiLineString, MultiPolygon</li>
<li>Shapefile does not have this concept, but it has a concept of <em>parts</em>.</li>
<li>polygon and polyline both have parts, but that doesn&#x27;t mean they are <em>multi</em> geometry</li>
<li>and  having multiple parts still does not mean it is a <em>multi</em> geometry</li>
<li>when convert to GeoJson, we have to decide whether it is a <em>multi</em> geometry or not by computing the geometry</li>
</ul>
<p>A part can have one exterior ring and any number of interior rings,
and it&#x27;s the number of exterior rings that determine whether it is a <em>multi</em> geometry or not</p>
<h2 id="multipolygon"><a class="subheading-anchor" aria-label="Link to section" href="#multipolygon"><span class="icon icon-link"></span></a>MultiPolygon</h2>
<img alt="Image" loading="lazy" width="718" height="404" decoding="async" data-nimg="1" style="color:transparent" src="/Multi.png"/>
<hr/>
<h2 id="ploygon"><a class="subheading-anchor" aria-label="Link to section" href="#ploygon"><span class="icon icon-link"></span></a>Ploygon</h2>
<img alt="Image" loading="lazy" width="718" height="404" decoding="async" data-nimg="1" style="color:transparent" src="/NoMulti.png"/>
<p>the index in parts section is the index of the first point of each part(exterior or interior line) respect to</p>
<ol>
<li>if there is only one part , then of course it&#x27;s a polygon or polyline(in the concept of GeoJson)</li>
<li>if the number of exterior rings is 1, it&#x27;s a polygon</li>
<li>if the number of exterior rings is greater than 1, it&#x27;s a MultiPolygon</li>
</ol>
<p>wheter a part is exterior or interior is determined by the winding order of the points in the part</p>
<img alt="Image" loading="lazy" width="718" height="404" decoding="async" data-nimg="1" style="color:transparent" src="/aboutRing.png"/>
<p>We can write a function that accept a list of rings and return a list of polygons
this is a very sophisticated function from open source library <em>pyshp</em>, it uses other functions like
is_cw, ring_bbox, bbox_contains, ring_sample, ring_contains_point, signed_area
you can find the implementation of these functions in the source code of pyshp
and you can also check the concise code on <a href="https://github.com/bre01/pyshp">my Github</a></p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="python" data-theme="default"><code data-language="python" data-theme="default" style="display:grid"><span data-line=""><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">organize_polygon_rings</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66;font-style:italic">rings</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">return_errors</span><span style="color:#ABB2BF">=</span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#98C379">&quot;&quot;&quot;Organize a list of coordinate rings into one or more polygons with holes.</span></span>
<span data-line=""><span style="color:#98C379">    Returns a list of polygons, where each polygon is composed of a single exterior</span></span>
<span data-line=""><span style="color:#98C379">    ring, and one or more interior holes. If a return_errors dict is provided (optional),</span></span>
<span data-line=""><span style="color:#98C379">    any errors encountered will be added to it.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#98C379">    Rings must be closed, and cannot intersect each other (non-self-intersecting polygon).</span></span>
<span data-line=""><span style="color:#98C379">    Rings are determined as exteriors if they run in clockwise direction, or interior</span></span>
<span data-line=""><span style="color:#98C379">    holes if they run in counter-clockwise direction. This method is used to construct</span></span>
<span data-line=""><span style="color:#98C379">    GeoJSON (multi)polygons from the shapefile polygon shape type, which does not</span></span>
<span data-line=""><span style="color:#98C379">    explicitly store the structure of the polygons beyond exterior/interior ring orientation.</span></span>
<span data-line=""><span style="color:#98C379">    &quot;&quot;&quot;</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># first iterate rings and classify as exterior or hole</span></span>
<span data-line=""><span style="color:#ABB2BF">    exteriors </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">    holes </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> ring </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> rings:</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># shapefile format defines a polygon as a sequence of rings</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># where exterior rings are clockwise, and holes counterclockwise</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">is_cw</span><span style="color:#ABB2BF">(ring):</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic"># ring is exterior</span></span>
<span data-line=""><span style="color:#ABB2BF">            exteriors.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(ring)</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic"># ring is a hole</span></span>
<span data-line=""><span style="color:#ABB2BF">            holes.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(ring)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># if only one exterior, then all holes belong to that exterior</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(exteriors) </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># exit early</span></span>
<span data-line=""><span style="color:#ABB2BF">        poly </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [exteriors[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">]] </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> holes</span></span>
<span data-line=""><span style="color:#ABB2BF">        polys </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [poly]</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> polys</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># multiple exteriors, ie multi-polygon, have to group holes with correct exterior</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># shapefile format does not specify which holes belong to which exteriors</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># so have to do efficient multi-stage checking of hole-to-exterior containment</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">elif</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(exteriors) </span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># exit early if no holes</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">not</span><span style="color:#ABB2BF"> holes:</span></span>
<span data-line=""><span style="color:#ABB2BF">            polys </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> ext </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> exteriors:</span></span>
<span data-line=""><span style="color:#ABB2BF">                poly </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [ext]</span></span>
<span data-line=""><span style="color:#ABB2BF">                polys.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(poly)</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> polys</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># first determine each hole&#x27;s candidate exteriors based on simple bbox contains test</span></span>
<span data-line=""><span style="color:#ABB2BF">        hole_exteriors </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">dict</span><span style="color:#ABB2BF">([(hole_i, []) </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> hole_i </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">xrange</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(holes))])</span></span>
<span data-line=""><span style="color:#ABB2BF">        exterior_bboxes </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [</span><span style="color:#61AFEF">ring_bbox</span><span style="color:#ABB2BF">(ring) </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> ring </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> exteriors]</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> hole_i </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> hole_exteriors.</span><span style="color:#61AFEF">keys</span><span style="color:#ABB2BF">():</span></span>
<span data-line=""><span style="color:#ABB2BF">            hole_bbox </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">ring_bbox</span><span style="color:#ABB2BF">(holes[hole_i])</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> ext_i, ext_bbox </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">enumerate</span><span style="color:#ABB2BF">(exterior_bboxes):</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">bbox_contains</span><span style="color:#ABB2BF">(ext_bbox, hole_bbox):</span></span>
<span data-line=""><span style="color:#ABB2BF">                    hole_exteriors[hole_i].</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(ext_i)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># then, for holes with still more than one possible exterior, do more detailed hole-in-ring test</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> hole_i, exterior_candidates </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> hole_exteriors.</span><span style="color:#61AFEF">items</span><span style="color:#ABB2BF">():</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(exterior_candidates) </span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># get hole sample point</span></span>
<span data-line=""><span style="color:#ABB2BF">                ccw </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">not</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">is_cw</span><span style="color:#ABB2BF">(holes[hole_i])</span></span>
<span data-line=""><span style="color:#ABB2BF">                hole_sample </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">ring_sample</span><span style="color:#ABB2BF">(holes[hole_i], </span><span style="color:#E06C75;font-style:italic">ccw</span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF">ccw)</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># collect new exterior candidates</span></span>
<span data-line=""><span style="color:#ABB2BF">                new_exterior_candidates </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> ext_i </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> exterior_candidates:</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#7F848E;font-style:italic"># check that hole sample point is inside exterior</span></span>
<span data-line=""><span style="color:#ABB2BF">                    hole_in_exterior </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">ring_contains_point</span><span style="color:#ABB2BF">(</span></span>
<span data-line=""><span style="color:#ABB2BF">                        exteriors[ext_i], hole_sample</span></span>
<span data-line=""><span style="color:#ABB2BF">                    )</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> hole_in_exterior:</span></span>
<span data-line=""><span style="color:#ABB2BF">                        new_exterior_candidates.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(ext_i)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># set new exterior candidates</span></span>
<span data-line=""><span style="color:#ABB2BF">                hole_exteriors[hole_i] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> new_exterior_candidates</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># if still holes with more than one possible exterior, means we have an exterior hole nested inside another exterior&#x27;s hole</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> hole_i, exterior_candidates </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> hole_exteriors.</span><span style="color:#61AFEF">items</span><span style="color:#ABB2BF">():</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(exterior_candidates) </span><span style="color:#56B6C2">&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># exterior candidate with the smallest area is the hole&#x27;s most immediate parent</span></span>
<span data-line=""><span style="color:#ABB2BF">                ext_i </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">sorted</span><span style="color:#ABB2BF">(</span></span>
<span data-line=""><span style="color:#ABB2BF">                    exterior_candidates,</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#E06C75;font-style:italic">key</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">lambda</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66;font-style:italic">x</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">abs</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">signed_area</span><span style="color:#ABB2BF">(exteriors[x], </span><span style="color:#E06C75;font-style:italic">fast</span><span style="color:#56B6C2">=</span><span style="color:#D19A66">True</span><span style="color:#ABB2BF">)),</span></span>
<span data-line=""><span style="color:#ABB2BF">                )[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">]</span></span>
<span data-line=""><span style="color:#ABB2BF">                hole_exteriors[hole_i] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [ext_i]</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># separate out holes that are orphaned (not contained by any exterior)</span></span>
<span data-line=""><span style="color:#ABB2BF">        orphan_holes </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> hole_i, exterior_candidates </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">list</span><span style="color:#ABB2BF">(hole_exteriors.</span><span style="color:#61AFEF">items</span><span style="color:#ABB2BF">()):</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">not</span><span style="color:#ABB2BF"> exterior_candidates:</span></span>
<span data-line=""><span style="color:#ABB2BF">                orphan_holes.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(hole_i)</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">del</span><span style="color:#ABB2BF"> hole_exteriors[hole_i]</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">continue</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># each hole should now only belong to one exterior, group into exterior-holes polygons</span></span>
<span data-line=""><span style="color:#ABB2BF">        polys </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> ext_i, ext </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">enumerate</span><span style="color:#ABB2BF">(exteriors):</span></span>
<span data-line=""><span style="color:#ABB2BF">            poly </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [ext]</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic"># find relevant holes</span></span>
<span data-line=""><span style="color:#ABB2BF">            poly_holes </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> hole_i, exterior_candidates </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">list</span><span style="color:#ABB2BF">(hole_exteriors.</span><span style="color:#61AFEF">items</span><span style="color:#ABB2BF">()):</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># hole is relevant if previously matched with this exterior</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> exterior_candidates[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> ext_i:</span></span>
<span data-line=""><span style="color:#ABB2BF">                    poly_holes.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(holes[hole_i])</span></span>
<span data-line=""><span style="color:#ABB2BF">            poly </span><span style="color:#56B6C2">+=</span><span style="color:#ABB2BF"> poly_holes</span></span>
<span data-line=""><span style="color:#ABB2BF">            polys.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(poly)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># add orphan holes as exteriors</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> hole_i </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> orphan_holes:</span></span>
<span data-line=""><span style="color:#ABB2BF">            ext </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> holes[hole_i]</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic"># add as single exterior without any holes</span></span>
<span data-line=""><span style="color:#ABB2BF">            poly </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [ext]</span></span>
<span data-line=""><span style="color:#ABB2BF">            polys.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(poly)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> orphan_holes </span><span style="color:#C678DD">and</span><span style="color:#ABB2BF"> return_errors </span><span style="color:#C678DD">is</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">not</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">            return_errors[</span><span style="color:#98C379">&quot;polygon_orphaned_holes&quot;</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(orphan_holes)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> polys</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># no exteriors, be nice and assume due to incorrect winding order</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> return_errors </span><span style="color:#C678DD">is</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">not</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">            return_errors[</span><span style="color:#98C379">&quot;polygon_only_holes&quot;</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(holes)</span></span>
<span data-line=""><span style="color:#ABB2BF">        exteriors </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> holes</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># add as single exterior without any holes</span></span>
<span data-line=""><span style="color:#ABB2BF">        polys </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [[ext] </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> ext </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> exteriors]</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> polys</span></span>
<span data-line=""> </span>
<span data-line=""> </span></code></pre></div>
<p>the Geojson from converted from shapefile will contain a object
that has a type property that is set to &quot;FeatureCollection&quot; and a features object
that consist of a list of features, each feature has a geometry object and a properties object,and a type property
that is set to feature</p>
<p>this is the polygon&#x27;s json structure
the endless [ and ] can frustrating</p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="json" data-theme="default"><code data-language="json" data-theme="default" style="display:grid"><span data-line=""><span style="color:#ABB2BF">{</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#E06C75">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;FeatureCollection&quot;</span><span style="color:#ABB2BF">, </span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#E06C75">&quot;features&quot;</span><span style="color:#ABB2BF">: [</span></span>
<span data-line=""><span style="color:#ABB2BF">        {</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#E06C75">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Feature&quot;</span><span style="color:#ABB2BF">, </span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#E06C75">&quot;properties&quot;</span><span style="color:#ABB2BF">:</span><span style="color:#D19A66">null</span><span style="color:#ABB2BF">, </span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#E06C75">&quot;geometry&quot;</span><span style="color:#ABB2BF">: {</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#E06C75">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Polygon&quot;</span><span style="color:#ABB2BF">, </span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#E06C75">&quot;coordinates&quot;</span><span style="color:#ABB2BF">: [</span></span>
<span data-line=""><span style="color:#ABB2BF">                    [[</span><span style="color:#D19A66">20.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">20.0</span><span style="color:#ABB2BF">], [</span><span style="color:#D19A66">20.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">30.0</span><span style="color:#ABB2BF">], [</span><span style="color:#D19A66">30.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">30.0</span><span style="color:#ABB2BF">], [</span><span style="color:#D19A66">20.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">20.0</span><span style="color:#ABB2BF">]], </span></span>
<span data-line=""><span style="color:#ABB2BF">                    [[</span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">], [</span><span style="color:#D19A66">100.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">], [</span><span style="color:#D19A66">100.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">100.0</span><span style="color:#ABB2BF">], [</span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">100.0</span><span style="color:#ABB2BF">], [</span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">]]</span></span>
<span data-line=""><span style="color:#ABB2BF">                ]</span></span>
<span data-line=""><span style="color:#ABB2BF">                }</span></span>
<span data-line=""><span style="color:#ABB2BF">        },</span></span>
<span data-line=""><span style="color:#ABB2BF">        {   </span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#E06C75">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Feature&quot;</span><span style="color:#ABB2BF">, </span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#E06C75">&quot;properties&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">null</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#E06C75">&quot;geometry&quot;</span><span style="color:#ABB2BF">: </span></span>
<span data-line=""><span style="color:#ABB2BF">            {</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#E06C75">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Polygon&quot;</span><span style="color:#ABB2BF">, </span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#E06C75">&quot;coordinates&quot;</span><span style="color:#ABB2BF">: [</span></span>
<span data-line=""><span style="color:#ABB2BF">                    [[</span><span style="color:#D19A66">150.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">150.0</span><span style="color:#ABB2BF">], [</span><span style="color:#D19A66">160.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">150.0</span><span style="color:#ABB2BF">], [</span><span style="color:#D19A66">180.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">170.0</span><span style="color:#ABB2BF">], [</span><span style="color:#D19A66">150.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">150.0</span><span style="color:#ABB2BF">]]</span></span>
<span data-line=""><span style="color:#ABB2BF">                ]</span></span>
<span data-line=""><span style="color:#ABB2BF">            }</span></span>
<span data-line=""><span style="color:#ABB2BF">        }, </span></span>
<span data-line=""><span style="color:#ABB2BF">    ], </span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#E06C75">&quot;bbox&quot;</span><span style="color:#ABB2BF">: [</span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">180.0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">170.0</span><span style="color:#ABB2BF">]}</span></span></code></pre></div>
<hr/>
<p>if the coordinates is like this for every single geometry</p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="json" data-theme="default"><code data-language="json" data-theme="default" style="display:grid"><span data-line=""><span style="color:#98C379">&quot;coordinates&quot;</span><span style="color:#ABB2BF">:[</span><span style="color:#D19A66">1.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">2.0</span><span style="color:#ABB2BF">]</span></span></code></pre></div>
<p>it&#x27;s a <em>point</em></p>
<hr/>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="json" data-theme="default"><code data-language="json" data-theme="default" style="display:grid"><span data-line=""><span style="color:#98C379">&quot;coordinates&quot;</span><span style="color:#ABB2BF">:[[</span><span style="color:#D19A66">1.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">2.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">3.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">4.0</span><span style="color:#ABB2BF">]]</span></span></code></pre></div>
<p><em>LineString</em>  or  <em>MultiPoint</em> depending on the type property</p>
<hr/>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="json" data-theme="default"><code data-language="json" data-theme="default" style="display:grid"><span data-line=""><span style="color:#98C379">&quot;coordinates&quot;</span><span style="color:#ABB2BF">:[</span></span>
<span data-line=""><span style="color:#ABB2BF">    [[</span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">10.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">10.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">10.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">10.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">0.0</span><span style="color:#ABB2BF">]]</span></span>
<span data-line=""><span style="color:#ABB2BF">    [[</span><span style="color:#D19A66">1.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">2.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">3.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">4.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">5.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">6.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">1.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">2.0</span><span style="color:#ABB2BF">]], </span></span>
<span data-line=""><span style="color:#ABB2BF">    ]</span></span></code></pre></div>
<p><em>Polygon</em>  or  <em>MultiLineString</em> depending on the type property</p>
<hr/>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="json" data-theme="default"><code data-language="json" data-theme="default" style="display:grid"><span data-line=""><span style="color:#98C379">&quot;coordinates&quot;</span><span style="color:#ABB2BF">:[</span></span>
<span data-line=""><span style="color:#ABB2BF">    [</span></span>
<span data-line=""><span style="color:#ABB2BF">        [[</span><span style="color:#D19A66">1.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">2.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">3.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">4.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">5.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">6.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">1.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">2.0</span><span style="color:#ABB2BF">]], </span></span>
<span data-line=""><span style="color:#ABB2BF">        [[</span><span style="color:#D19A66">7.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">8.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">9.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">10.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">11.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">12.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">7.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">8.0</span><span style="color:#ABB2BF">]]],</span></span>
<span data-line=""><span style="color:#ABB2BF">    [</span></span>
<span data-line=""><span style="color:#ABB2BF">        [[</span><span style="color:#D19A66">13.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">14.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">15.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">16.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">17.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">18.0</span><span style="color:#ABB2BF">],[</span><span style="color:#D19A66">13.0</span><span style="color:#ABB2BF">,</span><span style="color:#D19A66">14.0</span><span style="color:#ABB2BF">]]</span></span>
<span data-line=""><span style="color:#ABB2BF">    ]</span></span>
<span data-line=""><span style="color:#ABB2BF">]</span></span></code></pre></div>
<p><em>multipolygon</em>  that have two polygons<br/>
<!-- -->The first polygon have two rings, the first ring is the exterior ring and the second ring is the interior ring
and the second polygon only has one exterior ring</p>
<p>the Shape class can be converted to json use the __json__ method</p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="python" data-theme="default"><code data-language="python" data-theme="default" style="display:grid"><span data-line=""><span style="color:#C678DD">class</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Shape</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">object</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#D19A66">...</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">__json__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shapeType</span><span style="color:#56B6C2">==</span><span style="color:#98C379">&quot;Point&quot;</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#7F848E;font-style:italic"># the point only contains one point</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> {</span><span style="color:#98C379">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Point&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;coordinates&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">tuple</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.points[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">])}</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">elif</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shapeType</span><span style="color:#56B6C2">==</span><span style="color:#98C379">&quot;Polyline&quot;</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.parts) </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># the shape has no coordinate information, i.e. is &#x27;empty&#x27;</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># the geojson spec does not define a proper null-geometry type</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># however, it does allow geometry types with &#x27;empty&#x27; coordinates to be interpreted as null-geometries</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> {</span><span style="color:#98C379">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;LineString&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;coordinates&quot;</span><span style="color:#ABB2BF">: []}</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">elif</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.parts) </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># linestring</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#98C379">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;LineString&quot;</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#98C379">&quot;coordinates&quot;</span><span style="color:#ABB2BF">: [</span><span style="color:#56B6C2">tuple</span><span style="color:#ABB2BF">(p) </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> p </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.points],</span></span>
<span data-line=""><span style="color:#ABB2BF">                }</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># multilinestring</span></span>
<span data-line=""><span style="color:#ABB2BF">                ps </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">None</span></span>
<span data-line=""><span style="color:#ABB2BF">                coordinates </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> part </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.parts:</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> ps </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                        ps </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> part</span></span>
<span data-line=""><span style="color:#ABB2BF">                        </span><span style="color:#C678DD">continue</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                        coordinates.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">([</span><span style="color:#56B6C2">tuple</span><span style="color:#ABB2BF">(p) </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> p </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.points[ps:part]])</span></span>
<span data-line=""><span style="color:#ABB2BF">                        ps </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> part</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                    coordinates.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">([</span><span style="color:#56B6C2">tuple</span><span style="color:#ABB2BF">(p) </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> p </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.points[part:]])</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> {</span><span style="color:#98C379">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;MultiLineString&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;coordinates&quot;</span><span style="color:#ABB2BF">: coordinates}</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">elif</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shapeType</span><span style="color:#56B6C2">==</span><span style="color:#98C379">&quot;Polygon&quot;</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.parts) </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># the shape has no coordinate information, i.e. is &#x27;empty&#x27;</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># the geojson spec does not define a proper null-geometry type</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># however, it does allow geometry types with &#x27;empty&#x27; coordinates to be interpreted as null-geometries</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> {</span><span style="color:#98C379">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Polygon&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;coordinates&quot;</span><span style="color:#ABB2BF">: []}</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># get all polygon rings</span></span>
<span data-line=""><span style="color:#ABB2BF">                rings </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">range</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.parts)):</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#7F848E;font-style:italic"># get indexes of start and end points of the ring</span></span>
<span data-line=""><span style="color:#ABB2BF">                    start </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.parts[i]</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#C678DD">try</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                        end </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.parts[i </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">]</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#C678DD">except</span><span style="color:#ABB2BF"> IndexError:</span></span>
<span data-line=""><span style="color:#ABB2BF">                        end </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.points)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#7F848E;font-style:italic"># extract the points that make up the ring</span></span>
<span data-line=""><span style="color:#ABB2BF">                    ring </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [</span><span style="color:#56B6C2">tuple</span><span style="color:#ABB2BF">(p) </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> p </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.points[start:end]]</span></span>
<span data-line=""><span style="color:#ABB2BF">                    rings.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(ring)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># organize rings into list of polygons, where each polygon is defined as list of rings.</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># the first ring is the exterior and any remaining rings are holes (same as GeoJSON).</span></span>
<span data-line=""><span style="color:#ABB2BF">                polys </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">organize_polygon_rings</span><span style="color:#ABB2BF">(rings, </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">._errors)</span></span>
<span data-line=""><span style="color:#ABB2BF">                   </span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#7F848E;font-style:italic"># return as geojson</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">len</span><span style="color:#ABB2BF">(polys) </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> {</span><span style="color:#98C379">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Polygon&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;coordinates&quot;</span><span style="color:#ABB2BF">: polys[</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">]}</span></span>
<span data-line=""><span style="color:#ABB2BF">                </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">                    </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> {</span><span style="color:#98C379">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;MultiPolygon&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;coordinates&quot;</span><span style="color:#ABB2BF">: polys}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF">:</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">raise</span><span style="color:#ABB2BF"> Exception(</span><span style="color:#98C379">&quot;Unknown shape type&quot;</span><span style="color:#ABB2BF">)</span></span></code></pre></div>
<p>every Shape instance will be convert to a dict as a feature to be added to the features list
we also set the the properties of each feature to None for now,</p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="python" data-theme="default"><code data-language="python" data-theme="default" style="display:grid"><span data-line=""><span style="color:#C678DD">class</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Shp</span><span style="color:#ABB2BF">():</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#D19A66">...</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">iterShapeRecords</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># the number of shape and record should be the same</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># in a typical(correct) shapefile </span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># so we combine dbf attribute and shape into the a shapeRecord</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># but for now we only care about shape so set the record to None</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># the None will be convert to null in json</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> shape </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">iterShapes</span><span style="color:#ABB2BF">():</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#C678DD">yield</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">ShapeRecord</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">shape</span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF">shape, </span><span style="color:#E06C75;font-style:italic">record</span><span style="color:#56B6C2">=</span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">)</span></span></code></pre></div>
<p>we set a ShapeRecord class to hold the shape and the record</p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="python" data-theme="default"><code data-language="python" data-theme="default" style="display:grid"><span data-line=""><span style="color:#C678DD">class</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">ShapeRecord</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">object</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#98C379">&quot;&quot;&quot;A ShapeRecord object containing a shape along with its attributes.</span></span>
<span data-line=""><span style="color:#98C379">    Provides the __json__ property to return a Feature dictionary.&quot;&quot;&quot;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">__init__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">shape</span><span style="color:#ABB2BF">=</span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">record</span><span style="color:#ABB2BF">=</span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shape </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> shape</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.record </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> record</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic"># line 493</span></span>
<span data-line=""><span style="color:#61AFEF">    @</span><span style="color:#56B6C2">property</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">__json__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#7F848E;font-style:italic"># we don&#x27;t have properties now, so return properties as null </span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#98C379">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Feature&quot;</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#98C379">&quot;properties&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">None</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#98C379">&quot;geometry&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.shape.__json__</span></span>
<span data-line=""><span style="color:#ABB2BF">        }</span></span></code></pre></div>
<p>So we can wrap the ShapeRecords into a FeatureCollection</p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="python" data-theme="default"><code data-language="python" data-theme="default" style="display:grid"><span data-line=""><span style="color:#C678DD">class</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">Shp</span><span style="color:#ABB2BF">():</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#D19A66">...</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">def</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">__json__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">):</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#98C379">&quot;&quot;&quot;Returns a GeoJSON FeatureCollection representation of the shapefile.&quot;&quot;&quot;</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#98C379">&quot;type&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;FeatureCollection&quot;</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#98C379">&quot;features&quot;</span><span style="color:#ABB2BF">: [sr.__json__ </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> sr </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">iterShapeRecords</span><span style="color:#ABB2BF">()],</span></span>
<span data-line=""><span style="color:#ABB2BF">            </span><span style="color:#98C379">&quot;bbox&quot;</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.bbox,</span></span>
<span data-line=""><span style="color:#ABB2BF">        }</span></span></code></pre></div>
<p>The main function like like this,
We can use json to dump the dict out</p>
<div data-rehype-pretty-code-fragment=""><pre class="one-dark-pro" style="background-color:#282c34" tabindex="0" data-language="python" data-theme="default"><code data-language="python" data-theme="default" style="display:grid"><span data-line=""><span style="color:#ABB2BF">a</span><span style="color:#56B6C2">=</span><span style="color:#61AFEF">Shp</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;test.shp&quot;</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">geoJson</span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF">a.</span><span style="color:#61AFEF">__json__</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#C678DD">with</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">open</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;test.json&quot;</span><span style="color:#ABB2BF">,</span><span style="color:#98C379">&quot;w&quot;</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">as</span><span style="color:#ABB2BF"> f:</span></span>
<span data-line=""><span style="color:#ABB2BF">    json.</span><span style="color:#61AFEF">dump</span><span style="color:#ABB2BF">(geoJson,f)</span></span></code></pre></div></article></main></div><script src="/_next/static/chunks/webpack-4ec2099ca1b7223d.js" async=""></script><script src="/_next/static/chunks/2443530c-ac8981f6a5707b30.js" async=""></script><script src="/_next/static/chunks/139-1dec130228ce3944.js" async=""></script><script src="/_next/static/chunks/main-app-8f6b0c13af0069d1.js" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/a34f9d1faa5f3315-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/276042aec90b4f95.css\",{\"as\":\"style\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:I{\"id\":\"7858\",\"chunks\":[\"272:static/chunks/webpack-4ec2099ca1b7223d.js\",\"667:static/chunks/2443530c-ac8981f6a5707b30.js\",\"139:static/chunks/139-1dec130228ce3944.js\"],\"name\":\"\",\"async\":false}\n6:I{\"id\":\"3055\",\"chunks\":[\"272:static/chunks/webpack-4ec2099ca1b7223d.js\",\"667:static/chunks/2443530c-ac8981f6a5707b30.js\",\"139:static/chunks/139-1dec130228ce3944.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":\"2112\",\"chunks\":[\"414:static/chunks/414-bfaafd372e832af9.js\",\"185:static/chunks/app/layout-8f465736e9c75471.js\"],\"nam"])</script><script>self.__next_f.push([1,"e\":\"ThemeProvider\",\"async\":false}\n8:I{\"id\":\"4349\",\"chunks\":[\"414:static/chunks/414-bfaafd372e832af9.js\",\"185:static/chunks/app/layout-8f465736e9c75471.js\"],\"name\":\"ModeToggle\",\"async\":false}\n9:I{\"id\":\"414\",\"chunks\":[\"414:static/chunks/414-bfaafd372e832af9.js\",\"185:static/chunks/app/layout-8f465736e9c75471.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":\"1234\",\"chunks\":[\"414:static/chunks/414-bfaafd372e832af9.js\",\"185:static/chunks/app/layout-8f465736e9c75471.js\"],\"name\":\"Analytics\",\"async\":false}\nb:I{\"id\":\"9544\",\"ch"])</script><script>self.__next_f.push([1,"unks\":[\"272:static/chunks/webpack-4ec2099ca1b7223d.js\",\"667:static/chunks/2443530c-ac8981f6a5707b30.js\",\"139:static/chunks/139-1dec130228ce3944.js\"],\"name\":\"\",\"async\":false}\nc:I{\"id\":\"99\",\"chunks\":[\"272:static/chunks/webpack-4ec2099ca1b7223d.js\",\"667:static/chunks/2443530c-ac8981f6a5707b30.js\",\"139:static/chunks/139-1dec130228ce3944.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/276042aec90b4f95.css\",\"precedence\":\"next\"}]],[\"$\",\"$L4\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/read-shapefile-only-using-python-builtin-library\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"read-shapefile-only-using-python-builtin-library\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"read-shapefile-only-using-python-builtin-library\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$L5\",[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\"}]],\"globalErrorComponent\":\"$6\",\"notFound\":[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-50 __className_cc7fef\",\"children\":[\"$\",\"$L7\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"children\":[[\"$\",\"div\",null,{\"className\":\"max-w-2xl mx-auto py-10 px-4\",\"children\":[[\"$\",\"header\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[[\"$\",\"$L8\",null,{}],[\"$\",\"nav\",null,{\"className\":\"ml-auto text-sm font-medium space-x-6\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"children\":\"Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/about\",\"children\":\"About\"}]]}]]}]}],[\"$\",\"main\",null,{\"children\":[\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}]]}],[\"$\",\"$La\",null,{}]]}]}]}],\"asNotFound\":false,\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-50 __className_cc7fef\",\"children\":[\"$\",\"$L7\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"children\":[[\"$\",\"div\",null,{\"className\":\"max-w-2xl mx-auto py-10 px-4\",\"children\":[[\"$\",\"header\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[[\"$\",\"$L8\",null,{}],[\"$\",\"nav\",null,{\"className\":\"ml-auto text-sm font-medium space-x-6\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"children\":\"Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/about\",\"children\":\"About\"}]]}]]}]}],[\"$\",\"main\",null,{\"children\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",[\"slug\",\"read-shapefile-only-using-python-builtin-library\",\"c\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$Ld\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":[\\\"read-shapefile-only-using-python-builtin-library\\\"]}\"},\"styles\":[]}],\"segment\":[\"slug\",\"read-shapefile-only-using-python-builtin-library\",\"c\"]},\"styles\":[]}],\"segment\":\"posts\"},\"styles\":[]}]}]]}],[\"$\",\"$La\",null,{}]]}]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"e:I{\"id\":\"2011\",\"chunks\":[\"110:static/chunks/110-fa1ef238a86eb8d6.js\",\"49:static/chunks/app/posts/[...slug]/page-f2f50d4c01c96a41.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"d:[\"$\",\"article\",null,{\"className\":\"py-6 prose dark:prose-invert\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-2\",\"children\":\"Read shapefile only using python's built in libraray -- part 1\"}],[\"$\",\"p\",null,{\"className\":\"text-xl mt-0 text-slate-700 dark:text-slate-200\",\"children\":\"Read shapefile only using python's built in libraray\"}],[\"$\",\"hr\",null,{\"className\":\"my-4\"}],[[\"$\",\"p\",null,{\"children\":[\"Shapefile is open source, well, sort of. ESRI did not provide any tool to read it easily,\\nbut at least it provided the technical\\n\",[\"$\",\"a\",null,{\"href\":\"https://www.esri.com/content/dam/esrisites/sitecore-archive/Files/Pdfs/library/whitepapers/pdfs/shapefile.pdf\",\"children\":\"specification\"}],\".\\nSo it won't be so hard to write our own library that reads binary from it and convert it to some format\\nthat is more friendly.\",[\"$\",\"br\",null,{}],\"\\n\",\"In the blog, I will try to use python's built in library to read shapefile, and convert it to Geojson.\\nSo we can use it in our web application.\\nA Shapefile usually contains three files, .shp, .shx, .dbf. The .shp file contains the geometry information,\\nthe .shx file contains the index information, and the .dbf file contains the attribute information.\\nThere maybe be other files,like proj file about map project that is not compulsory and usually exclusively used by ESRI, so we will not try to Read and Convert it.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Reading through the specification, we can find the shp file is quite intuitive, it only contains one geometry type,\\nif the geometry type is point, then the record is about a point, if the geometry type is polyline,\\nthen the record is multiple points that form a the geometry.\"}],\"\\n\",[\"$\",\"$Le\",null,{\"src\":\"/shapefile1.png\",\"width\":\"718\",\"height\":\"404\",\"alt\":\"Image\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The File Header takes up 100 bytes(50 words)\\nA lot of bytes is reserved and what we need is the file length and the geometry type which\\nset at byte 24-27 and byte 32-35 respectively.\\none thing we need to notice is that the byte order of file length is big endian, while the byte order of geometry type is little endian.\\nafter it there are four double precision numbers that represent the bounding box of the shapefile\"}],\"\\n\",[\"$\",\"$Le\",null,{\"src\":\"/shapeMain.png\",\"width\":\"718\",\"height\":\"404\",\"alt\":\"Image\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"after we know the these two crucial information, we can start to read the records.\",[\"$\",\"br\",null,{}],\"\\n\",\"Each record Header takes up 8 bytes(4 words), I keep stress \",[\"$\",\"strong\",null,{\"children\":\"word\"}],\" cause it's used in the whitepaper extensively, and the Record Content length is variable and specified in the Record Header.\"]}],\"\\n\",[\"$\",\"$Le\",null,{\"src\":\"/recordHeader.png\",\"width\":\"718\",\"height\":\"404\",\"alt\":\"Image\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Every record Header contains the record number(integer) and the record length(integer), both are big endian that set at byte 0-3 and byte 4-7 respectively.\\nThe record number begins with \",[\"$\",\"strong\",null,{\"children\":\"1\"}],\" and increments sequentially. The record length is the length of the record content in 16-bit words.\\nSo each record takes up (2 byte * record length + 8) bytes\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"shapefile have a lot of types of geometry, but we will only focus on the three most common types, point, polyline and polygon.\\nA point consists of a pair of double-precision coordinates in the order X,Y.\\nThe record content of point is quite simple, it only contains the x and y coordinate of the point,\\nboth are double precision floating point number, and both are little endian,\"}],\"\\n\",[\"$\",\"$Le\",null,{\"src\":\"/pointStructure.png\",\"width\":\"718\",\"height\":\"404\",\"alt\":\"Image\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"$Le\",null,{\"src\":\"/pointStructure2.png\",\"width\":\"718\",\"height\":\"404\",\"alt\":\"Image\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"while polyline and polygon contains a list of points;\"}],\"\\n\",[\"$\",\"$Le\",null,{\"src\":\"/polyline.png\",\"width\":\"718\",\"height\":\"404\",\"alt\":\"Image\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"It also have a bounding box that is used to speed up the rendering process.\\nA polyline can be divide into multiple parts, each part is a list of points,\\nWe can find the parts info at byte 44~(x-1), x = 44 + 4 * num_parts, the parts section stores the index of the first point of each part respect to\\nthe following points section which is a array of points.\",[\"$\",\"br\",null,{}],\"\\n\",\"For example, if the parts section is [0, 3, 5], then the first part is the first three points in the points section.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"And what about polygon?\\nActually, we can think of polygon as a special case of polyline,\\nthe only difference is that the last point of the polygon is the same as the first point.\",[\"$\",\"br\",null,{}],\"\\n\",\"with thses information, we can start to write our own library to read shapefile's geometry information\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"First thing first, We need a class to represent the shapefile.\"}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Shp\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"__init__\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",*\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"agrs\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#set the path of the first parameter as the path of the shapefile when  Shp is initialized\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".path\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"agrs[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"] \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shp\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#a list to hold file opened, so we can close them later\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"_file_to_close\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"[]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shpLength\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shapeType\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".numShapes\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shapeName\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".encoding \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"'utf-8'\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".encoding_errors \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"'strict'\"}]]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The very first information we need in order to read .shp file is the shp file's header,\\nSo we load the shp file and read the header in the constructor.\"}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Shp\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"__init__\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",*\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"args\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"...\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"load\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"  \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"load\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"shapeName\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        (shapeName, ext) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" os.path.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"splitext\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(shapefile)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shapeName \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shapeName\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"load_shp\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(shapeName)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"load_shp\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"shapeName\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shp \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"open\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"%s\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"%s\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"%\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (shapefile_name, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"shp\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"), \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"rb\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shx \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"open\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"%s\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"%s\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"%\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (shapefile_name, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"shx\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"), \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"rb\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"._file_to_close.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shp)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"._file_to_close.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shx)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shp):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"load_shp_header\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shx):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"load_shx_header\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"load_shp_header\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        shp \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shp\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"seek\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"24\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# file length big endian\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shpLength \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003ei\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"4\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"))[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"] \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"*\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"2\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# from word(2 bytes) to byte\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# shape type :little endian\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"seek\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"32\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#small endian, one integer, 4 bytes\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shapeType \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003ci\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"4\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"))[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"] \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#unpack returns a tuple,\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#so we need to get the first element of the tuple\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#four double that represent the bounding box\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".bbox \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"_Array\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003c4d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"32\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#two double that represent the z box \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".zbox \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"_Array\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003c2d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"16\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#two double that represent the m box\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".mbox \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" m \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"_Array\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003c2d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"16\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"))):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"NODATA\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"-\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"10e38\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#according to the whitepaper, number \u003c -10e38 is considered as nodata\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#we can also specify the nodata value at  the top of the file\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" m \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"NODATA\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".mbox.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(m)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".mbox.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"So the shp's header has been read to memory\\nWe can start to read the content of each feature's geometry\\nWe can return a generator that yields the geometry of each feature,\\nthe generator can be really helpful when we have a large shapefile\"}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# we create a Shape class to represent the geometry and header of each feature\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Shape\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"__init__\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",   \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"oid\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    ):\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#when we init a Shape, we give it oid\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shapeType \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".points \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".parts \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#we set these public fields so \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#that we can set it outside the class \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" partTypes:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".partTypes \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" partTypes\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# and a dict to silently record any errors encountered\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"._errors \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {}\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# add oid which is the index of the feature in the shapefile\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" oid \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"is\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"not\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".__oid \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" oid\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".__oid \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"-\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1\"}]]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"we define a method that lazily read the geometry of each feature\\nby utilizing generator,\\nthe geometry is only read when we need it\"}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Shp\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"...\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"iterShapes\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"bbox\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\\\"\\\"Returns a generator of shapes in a shapefile. Useful\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"        for handling large shapefiles.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"        To only read shapes within a given spatial region, specify the 'bbox'\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"        arg as a list or tuple of xmin,ymin,xmax,ymax.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"        \\\"\\\"\\\"\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        shp \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"__getFileObj\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shp)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Found shapefiles which report incorrect\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# shp file length in the header. Can't trust\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# that so we seek to the end of the file\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# and figure it out.\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"seek\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"         \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        shpLength \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"tell\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"seek\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"100\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Instead iterate until reach end of file\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Collect the offset indices during iteration\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        i \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        offsets \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        pos \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"tell\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"while\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" pos \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shpLength:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            offsets.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(pos)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#when we create a Shape, we give it oid\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            shape \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"setShapeIndexAndRead\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":\"oid\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"i, )\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#because of the use of generator,\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#the shape is read when each __next__ is called\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            pos \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shp.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"tell\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shape:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"yield\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shape\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            i \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"+=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Entire shp file consumed\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Update the number of shapes and list of offsets\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"assert\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" i \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(offsets)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".numShapes \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" i\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"._offsets \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" offsets\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"setShapeIndexAndRead\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"oid\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\\\"\\\"Returns the header info and geometry for a single shape.\\\"\\\"\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        f \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"__getFileObj\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shp)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        single_shape \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"Shape\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":\"oid\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"oid)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        nParts \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" nPoints \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" zmin \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" zmax \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" mmin \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" mmax \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        (recIndex, recLength) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003e2i\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", f.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"8\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#print(recIndex,\\\"||\\\",oid)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#the recIndex =oid+1 because the oid starts from 0\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#while recIndex starts from 1\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Determine the start of the next record\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"next\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" f.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"tell\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"() \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"+\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"*\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" recLength)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        shapeType \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003ci\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", f.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"4\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"))[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        single_shape.shapeType \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shapeType\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# For Null shapes create an empty points list for consistency\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shapeType \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            single_shape.points \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# All shape types capable of having a bounding box\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"elif\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shapeType \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"3\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"5\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"8\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"13\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"15\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"18\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"23\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"25\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"28\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"31\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            single_shape.bbox \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"_Array\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003c4d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", f.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"32\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# if bbox specified and no overlap, skip this shape\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Shape types with parts\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shapeType \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"3\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"5\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"13\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"15\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"23\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"25\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"31\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            nParts \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003ci\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", f.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"4\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"))[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Shape types with points\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shapeType \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"3\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"5\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"8\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"13\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"15\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"18\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"23\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"25\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"28\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"31\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            nPoints \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003ci\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", f.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"4\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"))[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Read parts\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" nParts:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            single_shape.parts \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"_Array\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"i\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"%s\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"i\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"%\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" nParts, f.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(nParts \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"*\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"4\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Read points - produces a list of [x,y] values\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" nPoints:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            flat \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"%s\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"%\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"*\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" nPoints), f.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"16\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"*\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" nPoints))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#make the points into the form of [x,y] \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            single_shape.points \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"list\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"zip\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(*(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"iter\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(flat),) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"*\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"2\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Read a single point\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shapeType \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"11\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"21\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"#only read two point, simply make it a array\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            single_shape.points \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"_Array\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unpack\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\u003c2d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", f.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"read\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"16\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")))]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"         \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# Seek to the end of this record as defined by the record header because\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# the shapefile spec doesn't require the actual content to meet the header\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# definition.  Probably allowed for lazy feature deletion.\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        f.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"seek\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"next\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" single_shape    \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Now we have every shape geometry\\nsince we are dealing with the point,\\npolyline,ploygon,we only care about the points and parts of each shape\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"the-gotcha-of-shapefile-about-multi\",\"children\":[[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#the-gotcha-of-shapefile-about-multi\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"the gotcha of shapefile about \",[\"$\",\"em\",null,{\"children\":\"multi\"}]]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"GeoJson has a concept of \",[\"$\",\"em\",null,{\"children\":\"multi\"}],\" geometry, like MultiPoint, MultiLineString, MultiPolygon\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Shapefile does not have this concept, but it has a concept of \",[\"$\",\"em\",null,{\"children\":\"parts\"}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"polygon and polyline both have parts, but that doesn't mean they are \",[\"$\",\"em\",null,{\"children\":\"multi\"}],\" geometry\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"and  having multiple parts still does not mean it is a \",[\"$\",\"em\",null,{\"children\":\"multi\"}],\" geometry\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"when convert to GeoJson, we have to decide whether it is a \",[\"$\",\"em\",null,{\"children\":\"multi\"}],\" geometry or not by computing the geometry\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"A part can have one exterior ring and any number of interior rings,\\nand it's the number of exterior rings that determine whether it is a \",[\"$\",\"em\",null,{\"children\":\"multi\"}],\" geometry or not\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"multipolygon\",\"children\":[[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#multipolygon\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"MultiPolygon\"]}],\"\\n\",[\"$\",\"$Le\",null,{\"src\":\"/Multi.png\",\"width\":\"718\",\"height\":\"404\",\"alt\":\"Image\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"ploygon\",\"children\":[[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#ploygon\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Ploygon\"]}],\"\\n\",[\"$\",\"$Le\",null,{\"src\":\"/NoMulti.png\",\"width\":\"718\",\"height\":\"404\",\"alt\":\"Image\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"the index in parts section is the index of the first point of each part(exterior or interior line) respect to\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"if there is only one part , then of course it's a polygon or polyline(in the concept of GeoJson)\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"if the number of exterior rings is 1, it's a polygon\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"if the number of exterior rings is greater than 1, it's a MultiPolygon\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"wheter a part is exterior or interior is determined by the winding order of the points in the part\"}],\"\\n\",[\"$\",\"$Le\",null,{\"src\":\"/aboutRing.png\",\"width\":\"718\",\"height\":\"404\",\"alt\":\"Image\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We can write a function that accept a list of rings and return a list of polygons\\nthis is a very sophisticated function from open source library \",[\"$\",\"em\",null,{\"children\":\"pyshp\"}],\", it uses other functions like\\nis_cw, ring_bbox, bbox_contains, ring_sample, ring_contains_point, signed_area\\nyou can find the implementation of these functions in the source code of pyshp\\nand you can also check the concise code on \",[\"$\",\"a\",null,{\"href\":\"https://github.com/bre01/pyshp\",\"children\":\"my Github\"}]]}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"organize_polygon_rings\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"rings\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"return_errors\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\\\"\\\"Organize a list of coordinate rings into one or more polygons with holes.\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"    Returns a list of polygons, where each polygon is composed of a single exterior\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"    ring, and one or more interior holes. If a return_errors dict is provided (optional),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"    any errors encountered will be added to it.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"    Rings must be closed, and cannot intersect each other (non-self-intersecting polygon).\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"    Rings are determined as exteriors if they run in clockwise direction, or interior\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"    holes if they run in counter-clockwise direction. This method is used to construct\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"    GeoJSON (multi)polygons from the shapefile polygon shape type, which does not\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"    explicitly store the structure of the polygons beyond exterior/interior ring orientation.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"    \\\"\\\"\\\"\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# first iterate rings and classify as exterior or hole\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    exteriors \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    holes \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" ring \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" rings:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# shapefile format defines a polygon as a sequence of rings\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# where exterior rings are clockwise, and holes counterclockwise\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"is_cw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(ring):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# ring is exterior\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            exteriors.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(ring)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# ring is a hole\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            holes.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(ring)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# if only one exterior, then all holes belong to that exterior\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(exteriors) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# exit early\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        poly \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" [exteriors[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]] \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"+\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" holes\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        polys \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" [poly]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" polys\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# multiple exteriors, ie multi-polygon, have to group holes with correct exterior\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# shapefile format does not specify which holes belong to which exteriors\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# so have to do efficient multi-stage checking of hole-to-exterior containment\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"elif\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(exteriors) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# exit early if no holes\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"not\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" holes:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            polys \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" ext \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" exteriors:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                poly \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" [ext]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                polys.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(poly)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" polys\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# first determine each hole's candidate exteriors based on simple bbox contains test\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        hole_exteriors \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"([(hole_i, []) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_i \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"xrange\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(holes))])\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        exterior_bboxes \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"ring_bbox\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(ring) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" ring \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" exteriors]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_i \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_exteriors.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"keys\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"():\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            hole_bbox \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"ring_bbox\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(holes[hole_i])\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" ext_i, ext_bbox \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"enumerate\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(exterior_bboxes):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"bbox_contains\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(ext_bbox, hole_bbox):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    hole_exteriors[hole_i].\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(ext_i)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# then, for holes with still more than one possible exterior, do more detailed hole-in-ring test\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_i, exterior_candidates \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_exteriors.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"items\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"():\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(exterior_candidates) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# get hole sample point\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                ccw \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"not\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"is_cw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(holes[hole_i])\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                hole_sample \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"ring_sample\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(holes[hole_i], \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":\"ccw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"ccw)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# collect new exterior candidates\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                new_exterior_candidates \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" ext_i \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" exterior_candidates:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# check that hole sample point is inside exterior\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    hole_in_exterior \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"ring_contains_point\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                        exteriors[ext_i], hole_sample\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    )\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_in_exterior:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                        new_exterior_candidates.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(ext_i)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# set new exterior candidates\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                hole_exteriors[hole_i] \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" new_exterior_candidates\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# if still holes with more than one possible exterior, means we have an exterior hole nested inside another exterior's hole\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_i, exterior_candidates \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_exteriors.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"items\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"():\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(exterior_candidates) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# exterior candidate with the smallest area is the hole's most immediate parent\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                ext_i \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"sorted\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    exterior_candidates,\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":\"key\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"lambda\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"x\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"abs\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"signed_area\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(exteriors[x], \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":\"fast\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"True\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                )[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                hole_exteriors[hole_i] \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" [ext_i]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# separate out holes that are orphaned (not contained by any exterior)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        orphan_holes \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_i, exterior_candidates \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"list\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(hole_exteriors.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"items\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"not\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" exterior_candidates:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                orphan_holes.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(hole_i)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"del\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_exteriors[hole_i]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"continue\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# each hole should now only belong to one exterior, group into exterior-holes polygons\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        polys \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" ext_i, ext \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"enumerate\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(exteriors):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            poly \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" [ext]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# find relevant holes\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            poly_holes \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_i, exterior_candidates \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"list\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(hole_exteriors.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"items\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# hole is relevant if previously matched with this exterior\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" exterior_candidates[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"] \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" ext_i:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    poly_holes.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(holes[hole_i])\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            poly \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"+=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" poly_holes\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            polys.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(poly)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# add orphan holes as exteriors\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" hole_i \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" orphan_holes:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            ext \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" holes[hole_i]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# add as single exterior without any holes\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            poly \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" [ext]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            polys.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(poly)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" orphan_holes \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"and\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" return_errors \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"is\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"not\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            return_errors[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"polygon_orphaned_holes\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"] \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(orphan_holes)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" polys\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# no exteriors, be nice and assume due to incorrect winding order\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" return_errors \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"is\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"not\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            return_errors[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"polygon_only_holes\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"] \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(holes)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        exteriors \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" holes\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# add as single exterior without any holes\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        polys \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" [[ext] \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" ext \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" exteriors]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" polys\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"the Geojson from converted from shapefile will contain a object\\nthat has a type property that is set to \\\"FeatureCollection\\\" and a features object\\nthat consist of a list of features, each feature has a geometry object and a properties object,and a type property\\nthat is set to feature\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"this is the polygon's json structure\\nthe endless [ and ] can frustrating\"}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"json\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"json\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"{\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"FeatureCollection\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"features\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": [\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Feature\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"properties\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"null\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"geometry\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Polygon\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": [\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    [[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"20.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"20.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"], [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"20.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"30.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"], [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"30.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"30.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"], [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"20.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"20.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]], \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    [[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"], [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"100.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"], [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"100.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"100.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"], [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"100.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"], [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                ]\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        {   \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Feature\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"properties\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"null\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"geometry\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Polygon\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": [\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    [[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"150.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"150.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"], [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"160.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"150.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"], [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"180.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"170.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"], [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"150.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"150.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                ]\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        }, \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    ], \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"\\\"bbox\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"180.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"170.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]}\"}]]}]]}]}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"if the coordinates is like this for every single geometry\"}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"json\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"json\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"2.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]\"}]]}]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"it's a \",[\"$\",\"em\",null,{\"children\":\"point\"}]]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"json\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"json\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":[[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"2.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"3.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"4.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]]\"}]]}]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"em\",null,{\"children\":\"LineString\"}],\"  or  \",[\"$\",\"em\",null,{\"children\":\"MultiPoint\"}],\" depending on the type property\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"json\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"json\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":[\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    [[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"10.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"10.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"10.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"10.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    [[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"2.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"3.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"4.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"5.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"6.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"2.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]], \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    ]\"}]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"em\",null,{\"children\":\"Polygon\"}],\"  or  \",[\"$\",\"em\",null,{\"children\":\"MultiLineString\"}],\" depending on the type property\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"json\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"json\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":[\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    [\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        [[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"2.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"3.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"4.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"5.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"6.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"2.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]], \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        [[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"7.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"8.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"9.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"10.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"11.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"12.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"7.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"8.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]]],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    [\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        [[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"13.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"14.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"15.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"16.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"17.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"18.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"],[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"13.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"14.0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    ]\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]\"}]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"em\",null,{\"children\":\"multipolygon\"}],\"  that have two polygons\",[\"$\",\"br\",null,{}],\"\\n\",\"The first polygon have two rings, the first ring is the exterior ring and the second ring is the interior ring\\nand the second polygon only has one exterior ring\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"the Shape class can be converted to json use the __json__ method\"}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Shape\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"...\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"__json__\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shapeType\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Point\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# the point only contains one point\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Point\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"tuple\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".points[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"])}\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"elif\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shapeType\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Polyline\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".parts) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# the shape has no coordinate information, i.e. is 'empty'\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# the geojson spec does not define a proper null-geometry type\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# however, it does allow geometry types with 'empty' coordinates to be interpreted as null-geometries\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"LineString\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": []}\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"elif\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".parts) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# linestring\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"LineString\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"tuple\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(p) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" p \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".points],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# multilinestring\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                ps \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                coordinates \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" part \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".parts:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" ps \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                        ps \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" part\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"continue\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                        coordinates.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"([\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"tuple\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(p) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" p \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".points[ps:part]])\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                        ps \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" part\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    coordinates.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"([\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"tuple\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(p) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" p \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".points[part:]])\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"MultiLineString\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": coordinates}\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"elif\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shapeType\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Polygon\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".parts) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# the shape has no coordinate information, i.e. is 'empty'\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# the geojson spec does not define a proper null-geometry type\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# however, it does allow geometry types with 'empty' coordinates to be interpreted as null-geometries\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Polygon\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": []}\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# get all polygon rings\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                rings \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" i \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"range\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".parts)):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# get indexes of start and end points of the ring\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    start \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".parts[i]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                        end \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".parts[i \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"+\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"except\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" IndexError:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                        end \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".points)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# extract the points that make up the ring\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    ring \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"tuple\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(p) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" p \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".points[start:end]]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    rings.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(ring)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# organize rings into list of polygons, where each polygon is defined as list of rings.\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# the first ring is the exterior and any remaining rings are holes (same as GeoJSON).\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                polys \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"organize_polygon_rings\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(rings, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"._errors)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                   \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# return as geojson\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"len\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(polys) \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"==\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Polygon\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": polys[\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"]}\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"                    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"MultiPolygon\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"coordinates\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": polys}\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"else\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"raise\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" Exception(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Unknown shape type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"every Shape instance will be convert to a dict as a feature to be added to the features list\\nwe also set the the properties of each feature to None for now,\"}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Shp\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"():\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"...\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"iterShapeRecords\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# the number of shape and record should be the same\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# in a typical(correct) shapefile \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# so we combine dbf attribute and shape into the a shapeRecord\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# but for now we only care about shape so set the record to None\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# the None will be convert to null in json\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shape \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"iterShapes\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"():\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"yield\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"ShapeRecord\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":\"shape\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"shape, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\",\"fontStyle\":\"italic\"},\"children\":\"record\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"we set a ShapeRecord class to hold the shape and the record\"}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"ShapeRecord\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\\\"\\\"A ShapeRecord object containing a shape along with its attributes.\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"    Provides the __json__ property to return a Feature dictionary.\\\"\\\"\\\"\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"__init__\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"shape\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\",\"fontStyle\":\"italic\"},\"children\":\"record\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shape \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" shape\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".record \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" record\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# line 493\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"    @\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"property\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"__json__\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"# we don't have properties now, so return properties as null \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"Feature\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"properties\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"None\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"geometry\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".shape.__json__\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        }\"}]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"So we can wrap the ShapeRecords into a FeatureCollection\"}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Shp\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"():\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"...\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"__json__\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\",\"fontStyle\":\"italic\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"\\\"\\\"Returns a GeoJSON FeatureCollection representation of the shapefile.\\\"\\\"\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"FeatureCollection\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"features\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": [sr.__json__ \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" sr \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"iterShapeRecords\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"            \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"bbox\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".bbox,\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        }\"}]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The main function like like this,\\nWe can use json to dump the dict out\"}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"one-dark-pro\",\"style\":{\"backgroundColor\":\"#282c34\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"a\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"Shp\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"test.shp\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"geoJson\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"a.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"__json__\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"with\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\"open\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"test.json\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"w\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"as\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" f:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    json.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"dump\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(geoJson,f)\"}]]}]]}]}]}]]]}]\n"])</script><script>self.__next_f.push([1,"5:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"Read shapefile only using python's built in libraray -- part 1\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"Read shapefile only using python's built in libraray\"}],null,null,null,null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}]],[],null]]\n"])</script>